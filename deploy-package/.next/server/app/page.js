(()=>{var e={};e.id=974,e.ids=[974],e.modules={3236:(e,t,s)=>{Promise.resolve().then(s.bind(s,21204))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10852:(e,t,s)=>{Promise.resolve().then(s.bind(s,43077))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21204:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\zhuanjia\\\\expert-management-system\\\\src\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\zhuanjia\\expert-management-system\\src\\app\\page.tsx","default")},29190:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(60687),n=s(43210),i=s(85814),a=s.n(i),l=s(82136),o=s(16189);function d(){let{data:e,status:t}=(0,l.useSession)(),[s,i]=(0,n.useState)(!1),d=(0,o.useRouter)(),c=async()=>{await (0,l.signOut)({redirect:!1}),d.push("/")};return(0,r.jsx)("nav",{className:"bg-white shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(a(),{href:"/",className:"flex-shrink-0",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"专家管理系统"})})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(a(),{href:"/",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"专家列表"}),e?.user?.role==="admin"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{href:"/experts/create",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"添加专家"}),(0,r.jsx)(a(),{href:"/experts/import",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"批量导入"})]}),"loading"===t?(0,r.jsx)("div",{className:"text-gray-500",children:"加载中..."}):e?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-gray-700 text-sm",children:[e.user.email,"admin"===e.user.role&&(0,r.jsx)("span",{className:"ml-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"管理员"})]}),(0,r.jsx)("button",{onClick:c,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium",children:"退出登录"})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(a(),{href:"/auth/signin",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"登录"}),(0,r.jsx)(a(),{href:"/auth/signup",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium",children:"注册"})]})]}),(0,r.jsx)("div",{className:"md:hidden flex items-center",children:(0,r.jsx)("button",{onClick:()=>i(!s),className:"text-gray-700 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),s&&(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,r.jsx)(a(),{href:"/",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>i(!1),children:"专家列表"}),e?.user?.role==="admin"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{href:"/experts/create",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>i(!1),children:"添加专家"}),(0,r.jsx)(a(),{href:"/experts/import",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>i(!1),children:"批量导入"})]}),e?(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,r.jsxs)("div",{className:"px-3 py-2",children:[(0,r.jsx)("div",{className:"text-base font-medium text-gray-800",children:e.user.email}),"admin"===e.user.role&&(0,r.jsx)("div",{className:"text-sm text-blue-600",children:"管理员"})]}),(0,r.jsx)("button",{onClick:()=>{c(),i(!1)},className:"block w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:text-red-800",children:"退出登录"})]}):(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-1",children:[(0,r.jsx)(a(),{href:"/auth/signin",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>i(!1),children:"登录"}),(0,r.jsx)(a(),{href:"/auth/signup",className:"bg-indigo-600 hover:bg-indigo-700 text-white block px-3 py-2 rounded-md text-base font-medium",onClick:()=>i(!1),children:"注册"})]})]})})]})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},38965:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},43077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(60687),n=s(43210),i=s(82136),a=s(85814),l=s.n(a),o=s(29190);function d({onSearch:e,placeholder:t="搜索专家姓名、领域、特长...",defaultValue:s=""}){let[i,a]=(0,n.useState)(s);return(0,r.jsx)("form",{onSubmit:t=>{t.preventDefault(),e(i.trim())},className:"relative",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm placeholder-gray-500",placeholder:t}),i&&(0,r.jsx)("button",{type:"button",onClick:()=>{a(""),e("")},className:"absolute inset-y-0 right-8 flex items-center pr-2",children:(0,r.jsx)("svg",{className:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("button",{type:"submit",className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-indigo-600 hover:text-indigo-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})})}function c({searchQuery:e=""}){let{data:t}=(0,i.useSession)(),[s,a]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),[c,x]=(0,n.useState)(!0),[m,h]=(0,n.useState)(""),[p,u]=(0,n.useState)(1),g=async t=>{x(!0);try{let s=new URLSearchParams({page:t.toString(),limit:"10"});e&&s.append("query",e);let r=await fetch(`/api/experts?${s}`),n=await r.json();r.ok&&n.success?(a(n.data||[]),d(n.pagination||null),u(t)):h(n.error||"获取专家列表失败")}catch(e){h("获取专家列表失败")}finally{x(!1)}},f=e=>{g(e)},b=async e=>{if(confirm("确定要删除这位专家吗？此操作不可撤销。"))try{let t=await fetch(`/api/experts/${e}`,{method:"DELETE"});if(t.ok)g(p);else{let e=await t.json();alert(e.error||"删除失败")}}catch(e){alert("删除失败")}};return c?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)("div",{className:"text-lg text-gray-600",children:"加载中..."})}):m?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:m})}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-gray-500 text-lg mb-4",children:e?"没有找到匹配的专家":"暂无专家信息"}),t?.user?.role==="admin"&&!e&&(0,r.jsx)(l(),{href:"/experts/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"添加第一位专家"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>{let s=e.field.split(",").map(e=>e.trim()).filter(e=>e),n=e.specialty.split(",").map(e=>e.trim()).filter(e=>e);return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[e.photoUrl&&(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("img",{src:e.photoUrl,alt:e.name,className:"w-16 h-16 rounded-full object-cover border border-gray-200"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:(0,r.jsx)(l(),{href:`/experts/${e.id}`,className:"hover:text-indigo-600 transition-colors",children:e.name})}),e.title&&e.organization&&(0,r.jsxs)("p",{className:"text-gray-600 text-sm",children:[e.title," \xb7 ",e.organization]}),e.title&&!e.organization&&(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.title}),!e.title&&e.organization&&(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:e.organization}),e.certificates&&e.certificates.length>0&&(0,r.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["\uD83D\uDCDC ",e.certificates.length," 个证书"]})]})]}),t?.user?.role==="admin"&&(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(l(),{href:`/experts/${e.id}/edit`,className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"编辑"}),(0,r.jsx)("span",{className:"text-gray-300",children:"|"}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 text-sm",children:"删除"})]})]}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,3).map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:e},t)),s.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",s.length-3]})]})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[n.slice(0,3).map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:e},t)),n.length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",n.length-3]})]})}),e.bio&&(0,r.jsx)("p",{className:"text-gray-700 text-sm line-clamp-3 mb-4",children:e.bio}),(0,r.jsx)(l(),{href:`/experts/${e.id}`,className:"inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"查看详情 →"})]})},e.id)})}),o&&o.totalPages>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>f(p-1),disabled:!o.hasPrev,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一页"}),(0,r.jsx)("div",{className:"flex space-x-1",children:Array.from({length:o.totalPages},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>f(e),className:`px-3 py-2 border rounded-md text-sm font-medium ${e===p?"border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:e},e))}),(0,r.jsx)("button",{onClick:()=>f(p+1),disabled:!o.hasNext,className:"px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一页"})]}),o&&(0,r.jsxs)("div",{className:"text-center text-sm text-gray-600",children:["共 ",o.totalCount," 位专家，第 ",o.currentPage," / ",o.totalPages," 页"]})]})}function x(){let{data:e}=(0,i.useSession)(),[t,s]=(0,n.useState)(""),a=e=>{s(e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(o.A,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"专家人员管理系统"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"专业的专家人员信息管理与展示平台"})]}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,r.jsx)("div",{className:"w-full md:w-96",children:(0,r.jsx)(d,{onSearch:a})}),e?.user?.role==="admin"&&(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)(l(),{href:"/experts/create",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"添加专家"]}),(0,r.jsxs)(l(),{href:"/experts/import",className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"批量导入"]})]})]})}),t&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("p",{className:"text-gray-600",children:["搜索结果：",(0,r.jsxs)("span",{className:"font-medium",children:['"',t,'"']}),(0,r.jsx)("button",{onClick:()=>a(""),className:"ml-2 text-indigo-600 hover:text-indigo-800 text-sm",children:"清除搜索"})]})}),(0,r.jsx)(c,{searchQuery:t})]})]})}},48584:(e,t,s)=>{Promise.resolve().then(s.bind(s,79025))},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(31658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},78088:(e,t,s)=>{Promise.resolve().then(s.bind(s,84199))},79025:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(60687),n=s(82136);function i({children:e}){return(0,r.jsx)(n.SessionProvider,{children:e})}},79551:e=>{"use strict";e.exports=require("url")},80821:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},84199:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\zhuanjia\\\\expert-management-system\\\\src\\\\components\\\\SessionProvider.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\zhuanjia\\expert-management-system\\src\\components\\SessionProvider.tsx","default")},91066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(65239),n=s(48088),i=s(88170),a=s.n(i),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21204)),"D:\\zhuanjia\\expert-management-system\\src\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"D:\\zhuanjia\\expert-management-system\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\zhuanjia\\expert-management-system\\src\\app\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>d});var r=s(37413),n=s(22376),i=s.n(n),a=s(68726),l=s.n(a);s(61135);var o=s(84199);let d={title:"专家人员管理系统",description:"专业的专家人员信息管理与展示系统"};function c({children:e}){return(0,r.jsx)("html",{lang:"zh-CN",children:(0,r.jsx)("body",{className:`${i().variable} ${l().variable} antialiased`,children:(0,r.jsx)(o.default,{children:e})})})}}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[243,310,707],()=>s(91066));module.exports=r})();