(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{4392:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),r=t(2115),i=t(5695),l=t(2108),d=t(6874),n=t.n(d),c=t(5494);function x(){var e;let s=(0,i.useParams)(),t=(0,i.useRouter)(),{data:d}=(0,l.useSession)(),[x,m]=(0,r.useState)(null),[o,h]=(0,r.useState)(!0),[g,p]=(0,r.useState)(""),[u,j]=(0,r.useState)(!1),f=Array.isArray(s.id)?s.id[0]:s.id;(0,r.useEffect)(()=>{N()},[f]);let N=async()=>{try{let e=await fetch("/api/experts/".concat(f)),s=await e.json();e.ok?m(s.data):p(s.error||"获取专家信息失败")}catch(e){p("获取专家信息失败")}finally{h(!1)}},y=async()=>{if(confirm("确定要删除这位专家吗？此操作不可撤销。")){j(!0);try{let e=await fetch("/api/experts/".concat(f),{method:"DELETE"});if(e.ok)t.push("/");else{let s=await e.json();alert(s.error||"删除失败")}}catch(e){alert("删除失败")}finally{j(!1)}}};if(o)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("div",{className:"text-lg",children:"加载中..."})})]});if(g||!x)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsx)("p",{className:"text-red-800",children:g||"专家不存在"})})})]});let b=x.field.split(",").map(e=>e.trim()).filter(e=>e),v=x.specialty.split(",").map(e=>e.trim()).filter(e=>e);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(c.A,{}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-8 text-white",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-6",children:[x.photoUrl&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("img",{src:x.photoUrl,alt:x.name,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:x.name}),x.title&&x.organization&&(0,a.jsxs)("p",{className:"text-indigo-100 text-lg",children:[x.title," \xb7 ",x.organization]}),x.title&&!x.organization&&(0,a.jsx)("p",{className:"text-indigo-100 text-lg",children:x.title}),!x.title&&x.organization&&(0,a.jsx)("p",{className:"text-indigo-100 text-lg",children:x.organization})]})]}),(null==d||null==(e=d.user)?void 0:e.role)==="admin"&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n(),{href:"/experts/".concat(x.id,"/edit"),className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"编辑"}),(0,a.jsx)("button",{onClick:y,disabled:u,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors disabled:opacity-50",children:u?"删除中...":"删除"})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"基本信息"}),(0,a.jsxs)("div",{className:"space-y-2",children:[x.education&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"text-gray-600 w-20",children:"学历："}),(0,a.jsx)("span",{className:"text-gray-900",children:x.education})]}),x.contact&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"text-gray-600 w-20",children:"联系方式："}),(0,a.jsx)("span",{className:"text-gray-900",children:x.contact})]}),x.researchDirection&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"text-gray-600 w-20",children:"研究方向："}),(0,a.jsx)("span",{className:"text-gray-900",children:x.researchDirection})]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"专业领域"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:b.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:e},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"专家特长"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:e},s))})]}),x.bio&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"个人简介"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed",children:x.bio})]}),x.awards&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"获奖经历"}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:x.awards})})]}),x.achievements&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"代表性成果"}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:x.achievements})})]}),x.certificates&&x.certificates.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"专业证书"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.certificates.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),e.issuer&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"颁发机构:"})," ",e.issuer]}),e.issueDate&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"颁发日期:"})," ",e.issueDate]}),e.expiryDate&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"过期日期:"})," ",e.expiryDate]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:e.description})]}),e.fileUrl&&(0,a.jsx)("div",{className:"ml-4",children:(0,a.jsxs)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200",children:[(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"查看"]})})]})},e.id))})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["创建时间：",new Date(x.createdAt).toLocaleString("zh-CN")]}),(0,a.jsxs)("span",{children:["更新时间：",new Date(x.updatedAt).toLocaleString("zh-CN")]})]})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(n(),{href:"/",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"← 返回专家列表"})})]})]})}},5494:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(5155),r=t(2115),i=t(6874),l=t.n(i),d=t(2108),n=t(5695);function c(){var e,s;let{data:t,status:i}=(0,d.useSession)(),[c,x]=(0,r.useState)(!1),m=(0,n.useRouter)(),o=async()=>{await (0,d.signOut)({redirect:!1}),m.push("/")};return(0,a.jsx)("nav",{className:"bg-white shadow-lg",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/",className:"flex-shrink-0",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"专家管理系统"})})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,a.jsx)(l(),{href:"/",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"专家列表"}),(null==t||null==(e=t.user)?void 0:e.role)==="admin"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{href:"/experts/create",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"添加专家"}),(0,a.jsx)(l(),{href:"/experts/import",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"批量导入"})]}),"loading"===i?(0,a.jsx)("div",{className:"text-gray-500",children:"加载中..."}):t?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-gray-700 text-sm",children:[t.user.email,"admin"===t.user.role&&(0,a.jsx)("span",{className:"ml-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"管理员"})]}),(0,a.jsx)("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium",children:"退出登录"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l(),{href:"/auth/signin",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"登录"}),(0,a.jsx)(l(),{href:"/auth/signup",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-md text-sm font-medium",children:"注册"})]})]}),(0,a.jsx)("div",{className:"md:hidden flex items-center",children:(0,a.jsx)("button",{onClick:()=>x(!c),className:"text-gray-700 hover:text-gray-900 focus:outline-none focus:text-gray-900",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]}),c&&(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[(0,a.jsx)(l(),{href:"/",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>x(!1),children:"专家列表"}),(null==t||null==(s=t.user)?void 0:s.role)==="admin"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{href:"/experts/create",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>x(!1),children:"添加专家"}),(0,a.jsx)(l(),{href:"/experts/import",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>x(!1),children:"批量导入"})]}),t?(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,a.jsxs)("div",{className:"px-3 py-2",children:[(0,a.jsx)("div",{className:"text-base font-medium text-gray-800",children:t.user.email}),"admin"===t.user.role&&(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"管理员"})]}),(0,a.jsx)("button",{onClick:()=>{o(),x(!1)},className:"block w-full text-left px-3 py-2 text-base font-medium text-red-600 hover:text-red-800",children:"退出登录"})]}):(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-1",children:[(0,a.jsx)(l(),{href:"/auth/signin",className:"text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium",onClick:()=>x(!1),children:"登录"}),(0,a.jsx)(l(),{href:"/auth/signup",className:"bg-indigo-600 hover:bg-indigo-700 text-white block px-3 py-2 rounded-md text-base font-medium",onClick:()=>x(!1),children:"注册"})]})]})})]})})}},9014:(e,s,t)=>{Promise.resolve().then(t.bind(t,4392))}},e=>{var s=s=>e(e.s=s);e.O(0,[108,244,441,684,358],()=>s(9014)),_N_E=e.O()}]);